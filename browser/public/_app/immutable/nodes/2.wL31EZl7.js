import"../chunks/DsnmJJEf.js";import{o as Pn,a as ta}from"../chunks/Cvx2dFXJ.js";import{q as ra,as as na,at as ia,ab as te,h as tn,a as ri,Y as aa,au as sa,k as ni,av as oa,aw as la,ax as ca,ay as ua,az as ii,s as da,aA as fa,aB as Jr,K as va,w as ha,L as ma,a6 as _a,aC as ga,a8 as Nn,ai as O,V as He,Q as e,u as bt,a9 as W,ae as y,ap as it,aD as ze,af as p,ac as F,an as q,W as d,ad as zn,I as at,am as pi,ag as C,ak as st,ah as se,ao as qe,aa as Ee,aE as bi,aj as Mn,aF as ai,al as pa}from"../chunks/BQ9qYneo.js";import{i as ne}from"../chunks/Bq7AA_LH.js";import{c as ba,A as yi,S as lr,e as yt,s as qt,b as wi,d as ya,a as Ne,r as xi,f as wa,i as Or,h as si,j as Gt,k as Yr,l as ki,g as xa}from"../chunks/5pz18bYH.js";import{p as x,b as wt}from"../chunks/B5WrPElS.js";const ka=[];function Sn(r,t=!1,i=!1){return en(r,new Map,"",ka,null,i)}function en(r,t,i,a,s=null,l=!1){if(typeof r=="object"&&r!==null){var f=t.get(r);if(f!==void 0)return f;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(ra(r)){var v=Array(r.length);t.set(r,v),s!==null&&t.set(s,v);for(var m=0;m<r.length;m+=1){var g=r[m];m in r&&(v[m]=en(g,t,i,a,null,l))}return v}if(na(r)===ia){v={},t.set(r,v),s!==null&&t.set(s,v);for(var w in r)v[w]=en(r[w],t,i,a,null,l);return v}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function"&&!l)return en(r.toJSON(),t,i,a,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return r}}function oi(r,t,i=!1,a=!1,s=!1){var l=r,f="";te(()=>{var v=aa;if(f===(f=t()??"")){tn&&ri();return}if(v.nodes_start!==null&&(sa(v.nodes_start,v.nodes_end),v.nodes_start=v.nodes_end=null),f!==""){if(tn){ni.data;for(var m=ri(),g=m;m!==null&&(m.nodeType!==oa||m.data!=="");)g=m,m=la(m);if(m===null)throw ca(),ua;ii(ni,g),l=da(m);return}var w=f+"";i?w=`<svg>${w}</svg>`:a&&(w=`<math>${w}</math>`);var S=fa(w);if((i||a)&&(S=Jr(S)),ii(Jr(S),S.lastChild),i||a)for(;Jr(S);)l.before(Jr(S));else l.before(S)}})}function Cr(r,t,i){va(()=>{var a=ha(()=>t(r,i?.())||{});if(i&&a?.update){var s=!1,l={};ma(()=>{var f=i();_a(f),s&&ga(l,f)&&(l=f,a.update(f))}),s=!0}if(a?.destroy)return()=>a.destroy()})}function ve(r,t,i,a,s,l){var f=r.__className;if(tn||f!==i||f===void 0){var v=ba(i,a,l);(!tn||v!==r.getAttribute("class"))&&(v==null?r.removeAttribute("class"):r.className=v),r.__className=i}else if(l&&s!==l)for(var m in l){var g=!!l[m];(s==null||g!==!!s[m])&&r.classList.toggle(m,g)}return l}const Dn=(r,t)=>t.some(i=>r instanceof i);let li,ci;function Sa(){return li||(li=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ia(){return ci||(ci=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Tn=new WeakMap,In=new WeakMap,nn=new WeakMap;function Ea(r){const t=new Promise((i,a)=>{const s=()=>{r.removeEventListener("success",l),r.removeEventListener("error",f)},l=()=>{i(Kt(r.result)),s()},f=()=>{a(r.error),s()};r.addEventListener("success",l),r.addEventListener("error",f)});return nn.set(t,r),t}function Aa(r){if(Tn.has(r))return;const t=new Promise((i,a)=>{const s=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",f),r.removeEventListener("abort",f)},l=()=>{i(),s()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",l),r.addEventListener("error",f),r.addEventListener("abort",f)});Tn.set(r,t)}let jn={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return Tn.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Kt(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function Si(r){jn=r(jn)}function Fa(r){return Ia().includes(r)?function(...t){return r.apply(Ln(this),t),Kt(this.request)}:function(...t){return Kt(r.apply(Ln(this),t))}}function Oa(r){return typeof r=="function"?Fa(r):(r instanceof IDBTransaction&&Aa(r),Dn(r,Sa())?new Proxy(r,jn):r)}function Kt(r){if(r instanceof IDBRequest)return Ea(r);if(In.has(r))return In.get(r);const t=Oa(r);return t!==r&&(In.set(r,t),nn.set(t,r)),t}const Ln=r=>nn.get(r);function Ca(r,t,{blocked:i,upgrade:a,blocking:s,terminated:l}={}){const f=indexedDB.open(r,t),v=Kt(f);return a&&f.addEventListener("upgradeneeded",m=>{a(Kt(f.result),m.oldVersion,m.newVersion,Kt(f.transaction),m)}),i&&f.addEventListener("blocked",m=>i(m.oldVersion,m.newVersion,m)),v.then(m=>{l&&m.addEventListener("close",()=>l()),s&&m.addEventListener("versionchange",g=>s(g.oldVersion,g.newVersion,g))}).catch(()=>{}),v}const Ma=["get","getKey","getAll","getAllKeys","count"],Da=["put","add","delete","clear"],En=new Map;function ui(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(En.get(t))return En.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,s=Da.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(s||Ma.includes(i)))return;const l=async function(f,...v){const m=this.transaction(f,s?"readwrite":"readonly");let g=m.store;return a&&(g=g.index(v.shift())),(await Promise.all([g[i](...v),s&&m.done]))[0]};return En.set(t,l),l}Si(r=>({...r,get:(t,i,a)=>ui(t,i)||r.get(t,i,a),has:(t,i)=>!!ui(t,i)||r.has(t,i)}));const Ta=["continue","continuePrimaryKey","advance"],di={},Rn=new WeakMap,Ii=new WeakMap,ja={get(r,t){if(!Ta.includes(t))return r[t];let i=di[t];return i||(i=di[t]=function(...a){Rn.set(this,Ii.get(this)[t](...a))}),i}};async function*La(...r){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...r)),!t)return;t=t;const i=new Proxy(t,ja);for(Ii.set(i,t),nn.set(i,Ln(t));t;)yield i,t=await(Rn.get(i)||t.continue()),Rn.delete(i)}function fi(r,t){return t===Symbol.asyncIterator&&Dn(r,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&Dn(r,[IDBIndex,IDBObjectStore])}Si(r=>({...r,get(t,i,a){return fi(t,i)?La:r.get(t,i,a)},has(t,i){return fi(t,i)||r.has(t,i)}}));const Ra="ApCacheDB",Dr="ap",Ba=2,Pa=60*1e3;async function Ei(){return Ca(Ra,Ba,{upgrade(r){r.objectStoreNames.contains(Dr)||r.createObjectStore(Dr)}})}async function Na(r,t){await(await Ei()).put(Dr,{data:t,timestamp:Date.now()},r)}async function za(r){const t=await Ei(),i=await t.get(Dr,r);return i?Date.now()-i.timestamp>Pa?(await t.delete(Dr,r),null):i.data:null}class Ha{baseUrl=`${yi}/`;error="";async request(t="",i="GET",a,s){try{this.error="";const l={method:i,headers:{"Content-Type":"application/json",Authorization:`Bearer ${lr.token}`}};if(a&&(l.body=JSON.stringify(a)),s){let g=await za(t);if(g)return g}const f=`${this.baseUrl}${t}`;console.log("fetching url:",f,l);const v=await fetch(f,l),m=await v.json();return v.ok?(await Na(t,m),m):(lr.token=null,v.status===401&&console.log("authentication failed."),this.error=m.detail||"Unknown API error",console.log(`API Error: ${this.error}`),null)}catch(l){return console.log("Fetch error:",l),this.error="API: Error in fetching data.",null}finally{}}async getUsers(){return await this.request("users","GET",void 0,!0)??[]}async getFolders(t,i,a){const s=`path=${encodeURIComponent(t)}`,l=i.length>0?`&users=${encodeURIComponent(i.join(","))}`:"",f=a!==void 0&&a!==-1?`&age=${a}`:"",v=`folders?${s}${l}${f}`;return console.log("api url:",v),await this.request(v,"GET",void 0,!0)??[]}async getFiles(t,i,a){const s=`path=${encodeURIComponent(t)}`,l=i.length>0?`&users=${encodeURIComponent(i.join(","))}`:"",f=a!==void 0&&a!==-1?`&age=${a}`:"",v=`files?${s}${l}${f}`;return console.log("api url:",v),await this.request(v,"GET",void 0,!0)??[]}}const An=new Ha,G={valueField:null,labelField:null,groupLabelField:"label",groupItemsField:"options",disabledField:"$disabled",placeholder:"Select",valueAsObject:!1,searchable:!0,clearable:!1,highlightFirstItem:!0,selectOnTab:!1,resetOnBlur:!0,resetOnSelect:!0,fetchProps:{},fetchResetOnBlur:!0,fetchDebounceTime:300,multiple:!1,closeAfterSelect:"auto",deselectMode:"toggle",max:0,collapseSelection:null,keepSelectionInList:"auto",creatable:!1,creatablePrefix:"*",keepCreated:!0,allowEditing:!1,delimiter:",",fetchCallback:void 0,minQuery:1,lazyDropdown:!0,virtualList:!1,vlItemSize:void 0,i18n:{aria_label:"",aria_describedby:"",aria_selected:r=>r.length?`Option${r.length>1?"s":""} ${r.join(", ")} selected.`:"",aria_listActive:(r,t,i)=>`You are currently focused on option ${r[t]}. ${i} result${i>1?"s":""} available.`,aria_inputFocused:()=>"Select is focused, type to refine list, press down to scroll through the list",aria_removeItemLabel:(r,t)=>"Remove item",empty:"No options",nomatch:"No matching options",max:r=>`Maximum items ${r} selected`,fetchBefore:"Type to start searching",fetchQuery:(r,t)=>`Type at least ${r} character${r>1?"s":""} to start searching`,fetchInit:"Fetching data, please wait...",fetchEmpty:"No data related to your search",collapsedSelection:r=>`${r} selected`,createRowLabel:r=>`Add '${r}'`,emptyCreatable:"Add new by typing"},requestFactory:void 0};function Ua(r,t){let i;return(...a)=>{clearTimeout(i),i=setTimeout(()=>{r.apply(this,a)},t)}}function Ga(r,{url:t,parentValue:i,initial:a},s){i&&(t=t.replace("[parent]",encodeURIComponent(i))),r&&(t=t.replace("[query]",encodeURIComponent(r))),Array.isArray(a)&&a.length===0&&(a=null),a&&(t=t.replace("[query]","init"));const l=t[0]==="/"?new URL(t,window.location.origin):new URL(t);if(a){const m=Array.isArray(a)?a:[a];l.searchParams.append("init",m.join(","))}const f=new AbortController,v=Object.assign({},s,{signal:f.signal});return{request:new Request(l,v),controller:f}}var Vt=function(r,t){this.items=r,this.settings=t||{diacritics:!0}};Vt.prototype.tokenize=function(r,t,i){if(r=Wa(String(r||"").toLowerCase()),!r||!r.length)return[];var a,s,l,f,v=[],m=r.split(/ +/);for(a=0,s=m.length;a<s;a++){if(l=Ka(m[a]),this.settings.diacritics)for(f in Wt)Wt.hasOwnProperty(f)&&(l=l.replace(new RegExp(f,"g"),Wt[f]));t?l="\\b"+l:i&&(l="\\b^"+l),v.push({string:m[a],regex:new RegExp(l,"i")})}return v};Vt.prototype.iterator=function(r,t){var i;Array.isArray(r)?i=Array.prototype.forEach||function(a){for(var s=0,l=this.length;s<l;s++)a(this[s],s,this)}:i=function(a){for(var s in this)this.hasOwnProperty(s)&&a(this[s],s,this)},i.apply(r,[t])};Vt.prototype.getScoreFunction=function(r,t){var i,a,s,l,f;i=this,r=i.prepareSearch(r,t),s=r.tokens,a=r.options.fields,l=s.length,f=r.options.nesting;var v=function(g,w){var S,R;return!g||(g=String(g||""),R=g.search(w.regex),R===-1)?0:(S=w.string.length/g.length,R===0&&(S+=.5),S)},m=(function(){var g=a.length;return g?g===1?function(w,S){return v(Bn(S,a[0],f),w)}:function(w,S){for(var R=0,N=0;R<g;R++)N+=v(Bn(S,a[R],f),w);return N/g}:function(){return 0}})();return l?l===1?function(g){return m(s[0],g)}:r.options.conjunction==="and"?function(g){for(var w,S=0,R=0;S<l;S++){if(w=m(s[S],g),w<=0)return 0;R+=w}return R/l}:function(g){for(var w=0,S=0;w<l;w++)S+=m(s[w],g);return S/l}:function(){return 0}};Vt.prototype.getSortFunction=function(r,t){var i,a,s,l,f,v,m,g,w,S,R;if(s=this,r=s.prepareSearch(r,t),R=!r.query&&t.sort_empty||t.sort,w=function(N,V){return N==="$score"?V.score:Bn(s.items[V.id],N,t.nesting)},f=[],R)for(i=0,a=R.length;i<a;i++)(r.query||R[i].field!=="$score")&&f.push(R[i]);if(r.query){for(S=!0,i=0,a=f.length;i<a;i++)if(f[i].field==="$score"){S=!1;break}S&&f.unshift({field:"$score",direction:"desc"})}else for(i=0,a=f.length;i<a;i++)if(f[i].field==="$score"){f.splice(i,1);break}for(g=[],i=0,a=f.length;i<a;i++)g.push(f[i].direction==="desc"?-1:1);return v=f.length,v?v===1?(l=f[0].field,m=g[0],function(N,V){return m*vi(w(l,N),w(l,V))}):function(N,V){var Ae,We,De;for(Ae=0;Ae<v;Ae++)if(De=f[Ae].field,We=g[Ae]*vi(w(De,N),w(De,V)),We)return We;return 0}:null};Vt.prototype.prepareSearch=function(r,t){if(typeof r=="object")return r;t=qa({},t);var i=t.fields,a=t.sort,s=t.sort_empty;return i&&!Array.isArray(i)&&(t.fields=[i]),a&&!Array.isArray(a)&&(t.sort=[a]),s&&!Array.isArray(s)&&(t.sort_empty=[s]),{options:t,query:String(r||"").toLowerCase(),tokens:this.tokenize(r,t.wordsOnly,t.startOnly),total:0,items:[]}};Vt.prototype.search=function(r,t){var i=this,a,s,l,f;return s=this.prepareSearch(r,t),t=s.options,r=s.query,f=t.score||i.getScoreFunction(s),r.length?i.iterator(i.items,function(v,m){a=f(v),(t.filter===!1||a>0)&&s.items.push({score:a,id:m})}):i.iterator(i.items,function(v,m){s.items.push({score:1,id:m})}),l=i.getSortFunction(s,t),l&&s.items.sort(l),s.total=s.items.length,typeof t.limit=="number"&&(s.items=s.items.slice(0,t.limit)),s};var vi=function(r,t){return typeof r=="number"&&typeof t=="number"?r>t?1:r<t?-1:0:(r=rn(String(r||"")),t=rn(String(t||"")),r>t?1:t>r?-1:0)},qa=function(r,t){var i,a,s,l;for(i=1,a=arguments.length;i<a;i++)if(l=arguments[i],!!l)for(s in l)l.hasOwnProperty(s)&&(r[s]=l[s]);return r},Bn=function(r,t,i){if(!(!r||!t)){if(!i)return r[t];for(var a=t.split(".");a.length&&(r=r[a.shift()]););return r}},Wa=function(r){return(r+"").replace(/^\s+|\s+$|/g,"")},Ka=function(r){return(r+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},Wt={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"};const rn=(function(){var r,t,i,a,s="",l={};for(i in Wt)if(Wt.hasOwnProperty(i))for(a=Wt[i].substring(2,Wt[i].length-1),s+=a,r=0,t=a.length;r<t;r++)l[a.charAt(r)]=i;var f=new RegExp("["+s+"]","g");return function(v){return v.replace(f,function(m){return l[m]}).toLowerCase()}})();let Fr;function Va(r,t,i,a,s){const l=a(r,t,i);if(i==""||r.isSelected||s)return l;Fr||(Fr=document.createElement("div")),Fr.innerHTML=l;const f=rn(i);return(f.includes("|")?f.split("|").map(v=>v.trim()):f.split(" ")).filter(v=>v).forEach(v=>{Ai(Fr,v)}),Fr.innerHTML}function Ai(r,t){let i=0;if(r.nodeType===3){const s=rn(r.data);let l=s.indexOf(t);if(l-=s.substr(0,l).toUpperCase().length-s.substr(0,l).length,l>=0){const f=document.createElement("span");f.className="highlight";const v=r.splitText(l);v.splitText(t.length);const m=v.cloneNode(!0);f.appendChild(m),v.parentNode.replaceChild(f,v),i=1}}else if(r.nodeType===1&&r.childNodes&&!/(script|style)/i.test(r.tagName)&&(r.className!=="highlight"||r.tagName!=="SPAN"))for(var a=0;a<r.childNodes.length;++a)a+=Ai(r.childNodes[a],t);return i}function Qa(){return navigator.userAgent.toLowerCase().includes("android")}function Fn(r){return(r||"").replace(/\t/g," ").trim().split(" ").filter(t=>t).join(" ")}function Ja(r){return`${r}`.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Ya(r){const t=r-1;return t*t*t+1}function Xa(r,{from:t,to:i},a={}){var{delay:s=0,duration:l=L=>Math.sqrt(L)*120,easing:f=Ya}=a,v=getComputedStyle(r),m=v.transform==="none"?"":v.transform,[g,w]=v.transformOrigin.split(" ").map(parseFloat);g/=r.clientWidth,w/=r.clientHeight;var S=Za(r),R=r.clientWidth/i.width/S,N=r.clientHeight/i.height/S,V=t.left+t.width*g,Ae=t.top+t.height*w,We=i.left+i.width*g,De=i.top+i.height*w,Ke=(V-We)*R,ot=(Ae-De)*N,Se=t.width/i.width,Fe=t.height/i.height;return{delay:s,duration:typeof l=="function"?l(Math.sqrt(Ke*Ke+ot*ot)):l,easing:f,css:(L,le)=>{var ce=le*Ke,ue=le*ot,he=L+le*Se,Te=L+le*Fe;return`transform: ${m} translate(${ce}px, ${ue}px) scale(${he}, ${Te});`}}}function Za(r){if("currentCSSZoom"in r)return r.currentCSSZoom;for(var t=r,i=1;t!==null;)i*=+getComputedStyle(t).zoom,t=t.parentElement;return i}function On(r,t){const i=window.getComputedStyle(r);let{groups:{value:a,unit:s}}=i[t].match(/(?<value>\d+)(?<unit>[a-zA-Z]+)/),l=parseFloat(a);if(s!=="px"){const f=s==="rem"?document.documentElement:r.parentElement.parentElement;l=parseFloat(window.getComputedStyle(f).fontSize.match(/\d+/).shift())*l}return l}function $a(r){const t=r.parentElement.parentElement.getBoundingClientRect(),i=r.getBoundingClientRect(),a={};return a.top=t.top<0,a.left=t.left<0,a.bottom=t.bottom+i.height>(window.innerHeight||document.documentElement.clientHeight)&&t.top>i.height&&(window.innerHeight||document.documentElement.clientHeight)>i.height+50,a.right=t.right>(window.innerWidth||document.documentElement.clientWidth),a.any=a.top||a.left||a.bottom||a.right,a}function hi(r,t,i){if(!t)return;const a=$a(t);a.bottom&&!a.top?t.parentElement.style.bottom=t.parentElement.parentElement.clientHeight+1+"px":(!r||a.top||t.parentElement.style.bottom!=="")&&(t.parentElement.style.bottom="")}function Xr({container:r,scrollContainer:t,virtualList:i,center:a},s){if(i||!r)return;const l=r.querySelector(`[data-pos="${s}"]`);if(!l)return;const f=l.getBoundingClientRect(),v=t.getBoundingClientRect(),m=l.offsetHeight/3,g=0;switch(!0){case l.offsetTop<t.scrollTop:t.scrollTop=l.offsetTop-m+g;break;case l.offsetTop+f.height>t.scrollTop+v.height:t.scrollTop=l.offsetTop+f.height-t.offsetHeight+m+g;break}}function es(r,t,i,a){return{optionProps:[],optionsWithGroups:!1,valueField:r,labelField:t,optLabel:i,optItems:a}}function ts(r,t,i,a){let s=Array.isArray(t)?t:[t];return i&&(s=s.map(f=>f[a])),r.reduce((f,v)=>(s.includes(v[a])&&(v.$selected=!0,f.push(v)),f),[]).sort((f,v)=>s.indexOf(f[a])<s.indexOf(v[a])?-1:1)}function mi(r,t,i){return typeof r[0]=="object"?JSON.parse(JSON.stringify(r)):r.map(a=>({[t||"value"]:a,[i||"text"]:a}))}function Cn(r,t){const i=r.reduce((a,s,l)=>s[t.optItems]?(s[t.optItems].length===0||(t.optionsWithGroups=!0,a.push({label:s[t.optLabel],$isGroupHeader:!0}),a.push(...s[t.optItems].map(f=>(f.$isGroupItem=!0,f)))),a):(a.push(s),a),[]);return rs(i,t),i}function rs(r,t){r.some(i=>i.$isGroupHeader?!1:(t.optionProps=ns(i),!0))}function ns(r){const t=["$disabled","$isGroupHeader","$isGroupItem","$created","$selected"];return Object.keys(r).filter(i=>!t.includes(i))}function is(r,t,i,a,s={}){if(!s.keepSelectionInList&&i&&(r=r.filter(g=>!i.has(g[a.valueField])).filter((g,w,S)=>!(g.$isGroupHeader&&(S[w+1]&&S[w+1].$isGroupHeader||S.length<=1||S.length-1===w)))),s.disabled||!t)return r;const l=new Vt(r);(a.optionsWithGroups||s.skipSort)&&(l.getSortFunction=()=>null);let f="and";t.includes("|")&&(f="or",t=t.split("|").map(g=>g.trim()).join(" "));const v=l.search(t,{fields:s.fields||a.optionProps,sort:s.sort||as(a.labelField),conjunction:s.conjunction||f,nesting:s.nesting||!1,wordsOnly:s.wordsOnly||!1,startOnly:s.startOnly||!1});return a.optionsWithGroups?v.items.reduce((g,w)=>{const S=r[w.id];if(i&&S.isSelected)return g;const R=g.push(S);if(S.$isGroupItem){const N=r.slice(0,w.id);let V=null;do V=N.pop(),V&&V.$isGroupHeader&&!g.includes(V)&&g.splice(R-1,0,V);while(V&&!V.$isGroupHeader)}return g},[]):v.items.map(g=>r[g.id])}function as(r){return[{field:r,direction:"asc"}]}function Zr(r,t,i){const a=r==="value";let s=a?"value":"text";if(t&&t.length){const l=t[0][i]?t[0][i][0]:t[0];if(!l||typeof l=="string")return s;const f=a?0:1,v=a?["id","value","ID"]:["name","title","label"];s=Object.keys(l).filter(m=>v.includes(m)).concat([Object.keys(l)[f]]).shift()}return s}function ss(r,t){return r.bound_item=t,{destroy:()=>{}}}var os=W("<svelecte-list-row><!></svelecte-list-row>",2),ls=W("<svelecte-list-viewport><svelecte-list-content></svelecte-list-content></svelecte-list-viewport>",2);function cs(r,t){Nn(t,!0);const i=x(t,"itemHeight",3,null);function a(){return e(R).firstElementChild?.offsetHeight||0}let s=t.itemCount,l=t.scrollToIndex,f=0,v=O(0),m=O(0),g=O(0),w=O(0),S=O(null),R=O(null),N=O(He(i())),V=q(()=>`height:${e(w)}px;width:100%`),Ae=q(()=>{const L=[];for(let le=e(v);le<e(m);le++)L.push({index:le});return L});function We(L){if(l=L,(L<0||L>t.itemCount)&&(L=0),e(v)<L&&L<e(m)-1)return;const le=L*e(N),ce=le-e(S).clientHeight+e(N),ue=t.itemCount*e(N),he=Math.max(ce,Math.min(le,f));f=Math.max(0,Math.min(ue-e(S).clientHeight,he)),e(S).scroll({top:f,behavior:"auto"})}async function De(L){!e(N)&&L&&e(m)===0&&(d(m,1),await at(),d(N,a(),!0)),s=L,d(w,Math.min(t.maxHeight,L*e(N)),!0),d(m,Math.min(L,Math.round(t.maxHeight/e(N))),!0),await at(),Ke()}async function Ke(){const{scrollTop:L}=e(S),le=e(v);let ce=0,ue=0;for(;ce<t.itemCount;){if(ue+e(N)>L){d(v,ce,!0),d(g,ue,!0);break}ue+=e(N),ce+=1}for(;ce<t.itemCount&&(ue+=e(N),ce+=1,!(ue>L+e(w))););if(d(m,ce,!0),e(v)<le){let he=0,Te=0;for(let je=e(v);je<le;je+=1){const Ve=je-e(v);e(v)<=Ve&&Ve<e(m)&&(he+=e(N),Te+=e(N))}const B=Te-he;e(S).scrollTo(0,L+B)}}Pn(()=>{De(t.itemCount),e(S)?.addEventListener("scroll",Ke,{passive:!0})}),ta(()=>{e(S)?.removeEventListener("scroll",Ke)}),bt(()=>{s!==t.itemCount&&De(t.itemCount)}),bt(()=>{l!==t.scrollToIndex&&We(t.scrollToIndex)});var ot={resolveItemSize:a},Se=ls();ve(Se,1,"svelte-15oxbj1");var Fe=y(Se);return ve(Fe,1,"svelte-15oxbj1"),yt(Fe,21,()=>e(Ae),L=>L.index,(L,le)=>{var ce=os();ve(ce,1,"svelte-15oxbj1");var ue=y(ce);it(ue,()=>t.children??ze,()=>e(le).index),p(ce),F(L,ce)}),p(Fe),wt(Fe,L=>d(R,L),()=>e(R)),p(Se),wt(Se,L=>d(S,L),()=>e(S)),te(()=>{qt(Se,e(V)),qt(Fe,`padding-top: ${e(g)??""}px; height: ${t.itemCount*e(N)}px;`)}),F(r,Se),zn(ot)}const us=(r,t=ze,i=ze)=>{var a=ms(),s=y(a,!0);p(a),te(l=>se(s,l),[()=>i().collapsedSelection(t().length)]),F(r,a)},ds=(r,t=ze)=>{var i=ys();F(r,i)};G.requestFactory=Ga;const Mr={default(r){return Ja(r[this.label])},html(r){return r[this.label]}},$r=r=>({destroy:()=>{}});function fs(r,t){if(r instanceof Object)for(let i in r)Mr[i]=r[i];else Mr[r]=t}const vs=G;function _i(r){r.preventDefault()}function hs(r,t,i){e(t).length===1&&i()}var ms=W("<span> </span>"),_s=r=>r.preventDefault(),gs=W('<button class="sv-item--btn" tabindex="-1" type="button" data-action="deselect"><svg height="16" width="16" viewBox="0 0 20 20" aria-hidden="true" focusable="false"><path d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></svg></button>'),ps=W('<div class="sv-item--container"><div><div class="sv-item--content"><!></div></div> <!></div>'),bs=bi('<svg class="indicator-icon svelte-kgu1bj" viewBox="0 0 20 20" aria-hidden="true" focusable="false"><path d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></svg>'),ys=bi('<svg class="indicator-icon svelte-kgu1bj" viewBox="0 0 20 20" aria-hidden="true" focusable="false"><path d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"></path></svg>'),ws=W('<div class="sv-item--content"><!></div>'),xs=W('<span> </span> <span class="shortcut svelte-kgu1bj"><kbd class="svelte-kgu1bj"> </kbd>+<kbd class="svelte-kgu1bj">Enter</kbd></span>',1),ks=W('<span id="aria-selection"> </span> <span id="aria-context"> </span>',1),Ss=W("<option selected> </option>"),Is=W('<select size="1" class="sv-hidden-element" tabindex="-1" aria-hidden="true"></select>'),Es=W('<button type="button" data-action="deselect" tabindex="-1"><!></button>'),As=W('<span class="sv-btn-separator svelte-kgu1bj"></span>'),Fs=W('<div class="sv-optgroup-header"><b> </b></div>'),Os=W("<div><!></div>"),Cs=W('<div class="sv-optgroup-header"><b> </b></div>'),Ms=W("<div><!></div>"),Ds=W('<div class="is-dropdown-row svelte-kgu1bj"><div><div class="sv-item--content"> </div></div></div>'),Ts=r=>r.preventDefault(),js=W('<div class="is-dropdown-row svelte-kgu1bj"><button type="button"><!></button></div>'),Ls=W('<!> <div tabindex="-1"><div><!> <!></div></div> <!>',1),Rs=W('<div role="none"><span aria-live="polite" aria-atomic="false" aria-relevant="additions text" class="a11y-text svelte-kgu1bj"><!></span> <!>  <div><!> <div><!> <span class="sv-input--sizer svelte-kgu1bj"><input type="text" size="1" autocapitalize="none" autocomplete="off" autocorrect="off" spellcheck="false" aria-autocomplete="list" tabindex="0"/></span></div>  <div><!> <!> <button type="button" data-action="toggle" tabindex="-1"><!></button></div> <!></div>  <div><!></div></div>');function Bs(r,t){Nn(t,!0);const i=(n,o=ze,b=ze)=>{var E=qe(),k=Ee(E);yt(k,25,o,P=>P[e(D)],(P,$)=>{var Q=ps();Q.__mousedown=[_s];var ie=y(Q);let fe;var gt=y(ie),Ir=y(gt);oi(Ir,()=>e(ir)(e($),!0)),p(gt),p(ie);var Er=C(ie,2);{var xn=zt=>{var X=gs();Cr(X,(oe,ke)=>b()?.(oe,ke),()=>e($)),te(oe=>Ne(X,"aria-label",oe),[()=>e(_).aria_removeItemLabel(e($),e(ye))]),F(zt,X)};ne(Er,zt=>{B()&&zt(xn)})}p(Q),te(zt=>fe=ve(ie,1,"sv-item--wrap in-selection",null,fe,zt),[()=>({"is-multi":B()})]),wa(Q,()=>Xa,()=>({duration:e(Oe)})),F(P,Q)}),F(n,E)},a=(n,o=ze,b=ze)=>{var E=qe(),k=Ee(E);{var P=$=>{var Q=bs();F($,Q)};ne(k,$=>{e(M).length&&$(P)})}F(n,E)},s=(n,o=ze,b=ze)=>{var E=ws(),k=y(E);oi(k,()=>Va(o(),!1,b(),e(ir),ot())),p(E),F(n,E)},l=(n,o=ze,b=ze,E=ze)=>{var k=xs(),P=Ee(k);let $;var Q=y(P,!0);p(P);var ie=C(P,2),fe=y(ie),gt=y(fe,!0);p(fe),Mn(2),p(ie),te((Ir,Er)=>{$=ve(P,1,"svelte-kgu1bj",null,$,Ir),se(Q,Er),se(gt,e(h))},[()=>({"is-loading":o()}),()=>E().createRowLabel(b())]),F(n,k)};let f=x(t,"name",3,""),v=x(t,"inputId",7,""),m=x(t,"required",3,!1),g=x(t,"disabled",7,!1),w=x(t,"options",23,()=>[]),S=x(t,"valueField",19,()=>G.valueField),R=x(t,"labelField",19,()=>G.labelField),N=x(t,"groupLabelField",19,()=>G.groupLabelField),V=x(t,"groupItemsField",19,()=>G.groupItemsField),Ae=x(t,"disabledField",19,()=>G.disabledField),We=x(t,"placeholder",19,()=>G.placeholder),De=x(t,"searchable",19,()=>G.searchable),Ke=x(t,"clearable",19,()=>G.clearable),ot=x(t,"disableHighlight",3,!1),Se=x(t,"highlightFirstItem",19,()=>G.highlightFirstItem),Fe=x(t,"selectOnTab",19,()=>G.selectOnTab),L=x(t,"resetOnBlur",19,()=>G.resetOnBlur),le=x(t,"resetOnSelect",19,()=>G.resetOnSelect),ce=x(t,"closeAfterSelect",19,()=>G.closeAfterSelect),ue=x(t,"deselectMode",19,()=>G.deselectMode),he=x(t,"dndzone",3,$r),Te=x(t,"strictMode",3,!0),B=x(t,"multiple",19,()=>G.multiple),je=x(t,"max",19,()=>G.max),Ve=x(t,"collapseSelection",19,()=>G.collapseSelection),Qt=x(t,"keepSelectionInList",19,()=>G.keepSelectionInList),me=x(t,"creatable",19,()=>G.creatable),Mt=x(t,"creatablePrefix",19,()=>G.creatablePrefix),Jt=x(t,"allowEditing",19,()=>G.allowEditing),cr=x(t,"keepCreated",19,()=>G.keepCreated),Y=x(t,"delimiter",19,()=>G.delimiter),be=x(t,"fetch",3,null),ur=x(t,"fetchProps",19,()=>G.fetchProps),an=x(t,"fetchMode",3,"auto"),Tr=x(t,"fetchCallback",19,()=>G.fetchCallback),Ze=x(t,"fetchResetOnBlur",7,!0),sn=x(t,"fetchDebounceTime",19,()=>G.fetchDebounceTime),Le=x(t,"minQuery",19,()=>G.minQuery),dr=x(t,"lazyDropdown",19,()=>G.lazyDropdown),Qe=x(t,"virtualList",19,()=>G.virtualList),jr=x(t,"vlItemSize",19,()=>G.vlItemSize),on=x(t,"searchProps",3,null),lt=x(t,"class",3,"svelecte-control"),fr=x(t,"i18n",3,null),_e=x(t,"value",15),vr=x(t,"readSelection",15),ln=x(t,"emitValues",3,!1),Je=x(t,"valueAsObject",19,()=>G.valueAsObject),Ue=x(t,"parentValue",3,void 0),Yt=x(t,"onChange",3,n=>{}),cn=x(t,"onFocus",3,n=>{}),Lr=x(t,"onBlur",3,n=>{}),Xt=x(t,"onCreateOption",3,n=>{}),hr=x(t,"onCreateFail",3,n=>{}),Rr=x(t,"onEnterKey",3,n=>{}),Dt=x(t,"onFetch",3,n=>{}),Zt=x(t,"onFetchError",3,n=>{}),mr=x(t,"onInvalidValue",3,n=>{}),Br=x(t,"prepend",3,void 0),un=x(t,"collapsedSelection",3,us),dn=x(t,"selection",3,i),Pr=x(t,"clearIcon",3,a),fn=x(t,"toggleIcon",3,ds),_r=x(t,"append",3,void 0),$t=x(t,"listHeader",3,void 0),er=x(t,"option",3,s),gr=x(t,"createRow",3,l),Tt=x(t,"positionResolver",3,$r),jt=x(t,"anchor_element",3,void 0),pr=x(t,"controlClass",3,void 0),tr=x(t,"dropdownClass",3,void 0),xt=x(t,"optionClass",3,void 0);function Nr(){de.focus()}function vn(n,o){ut(n),o&&kr()}function hn(n){return At(!n)}function mn(n){be()&&(gn({init:!0,initValue:n,storedValue:Ze()}),Ze(!1))}const kt=f()?`sv-${f()}-select-${`${Math.random()}`.substring(2,6)}`:null;m()&&!f()&&console.warn("[Svelecte]: 'required' prop has no effect when 'name' prop is NOT set"),be()&&_e()&&Je()&&!Te()&&(!w()||w()&&w().length===0)&&w(Array.isArray(_e())?_e():[_e()]),v()||v(kt?kt.replace("-select-","-input-"):`svelecte-input-${`${Math.random()}`.substring(2,12)}`);let St=O(!1),br=w(),Be,yr,rr=t.optionResolver?t.optionResolver(w(),new Set):mi(w(),S(),R()),D=O(He(S()||Zr("value",rr,V()))),ye=O(He(R()||Zr("label",rr,V())));const Ie=es(e(D),e(ye),N(),V());let ge=O(He(Cn(rr,Ie))),Lt=O(!1),Ye=q(()=>e(Lt)?[]:e(ge));rr=void 0;let M=O(He(_e()?ts(e(Ye),_e(),Je(),e(D)):[]));const Z=e(M).reduce((n,o)=>(n.add(o[e(D)]),n),new Set);let ct=e(M).filter(n=>n.$created),vt=O(!1),It=O(!1),wr=O(!1),pe=O(!1),Rt=O(!1),K=O(He(Se()?0:-1)),nr=O(!dr()),c=null,h=O(void 0),u=O(""),A=!1,_=q(()=>Object.assign({},vs.i18n,fr()||{})),I=q(()=>an()==="init"||be()&&be().includes("[query]")===!1),z=be()&&(_e()||B()&&_e()&&_e().length)?Je()?Te()===!1?Sn(_e()):null:JSON.parse(JSON.stringify(_e())):null,J=null,T=O(Ve()!==null),U=O(!1),j=O(!1),Oe=O(100),ae=!1,we=!1,de,ee,Ce,re=O(null),Ge;bt(()=>{xr(S(),R())});let Me=q(()=>je()!==0&&e(M).length==je());bt(()=>{zr(w())}),bt(()=>{_e()!==void 0&&ut(_e())});let Re=null,H=q(()=>(e(M).length,e(Ye).length,!e(u)&&be()&&!e(I)&&Ze()?[]:Re||(e(Me)?[]:is(e(Ye),e(u),Pi(e(u)),Ie,on()||{}))));bt(()=>{let n=e(H).length;me()&&e(u)&&n++,n<=e(K)&&_t(0,{asc:!me(),desc:me()}),Fi(e(Me),e(H))}),Se()&&_t(0,{asc:!0});let ht=q(()=>t.createFilter||(n=>ct.includes(n))),Et=q(()=>t.createHandler||(({inputValue:n,labelField:o,valueField:b,prefix:E})=>({[b]:n,[o]:`${E}${n}`}))),ir=q(()=>typeof t.renderer=="function"?t.renderer:(Mr[t.renderer]?Mr[t.renderer]:Mr.default).bind({label:e(ye)})),Xe=q(()=>De()?"text":"none"),$e=q(()=>e(M).length?"":We()),et=q(()=>e(M).length>0&&B()===!1?null:"enter"),Bt=q(()=>e(_).aria_selected(e(M).map(n=>n[e(ye)]))),mt=q(()=>{if(e(M).length&&e(M).length===je())return e(_).max(je());const n=Math.min(e(K),e(H).length-1);return be()?e(U)?e(_).fetchInit:e(H).length?e(K)!==-1?e(_).aria_inputFocused():e(H)[e(K)]?e(_).aria_listActive(e(H)[n],e(ye),e(H).filter(o=>!o.$isGroupHeader).length):"N/A."+e(K):Le()>1?e(_).fetchQuery(Le(),e(u).length):e(_).fetchBefore:e(H).length?e(pe)&&e(K)!==-1&&!isNaN(e(K))?e(_).aria_listActive(e(H)[n],e(ye),e(H).filter(o=>!o.$isGroupHeader).length):e(_).aria_inputFocused():e(u).length?e(_).nomatch:e(_).empty});function xr(n,o){e(St)&&(n&&e(D)!==n&&(Ie.valueField=d(D,n,!0),Z.size>0&&ar()),o&&(Ie.labelField=d(ye,o,!0)))}function zr(n){if(br!==n){if(n=Cn(mi(n,e(D),e(ye)),Ie),!S()){const o=Zr("value",n||null,V());!S()&&e(D)!==o&&(Ie.valueField=d(D,o,!0),Z.size>0&&ar())}if(!R()){const o=Zr("label",n||null,V());!R()&&e(ye)!==o&&(Ie.labelField=o,d(ye,o,!0))}br=n,d(ge,t.optionResolver?t.optionResolver(n,Z):n,!0)}}function Hr(n,o){if(B()){if(n&&o?.length===n.length&&n.length>0)return Je()?n.every((b,E)=>b[e(D)]===o[E][e(D)]):n.every((b,E)=>b===o[E])}else if(o&&n)return Je()?o[e(D)]===n[e(D)]:o===n;return!1}function ut(n,o){if(Hr(Be,n)&&!o?.skipEqualityCheck)return;const b=Array.isArray(n)&&n.length||B()===!1;if(n!==null&&b){if((B()&&!Array.isArray(n)||!B()&&Array.isArray(n))&&console.warn(`[Svelecte]: Passed 'value' property should ${B()?"be":"NOT be"} an array`),z&&(!Array.isArray(z)||z.length))return;const E=Array.isArray(n)?n:[n],k=[],P=E.reduce((Q,ie)=>{if(Je()&&(!Te()||me()&&ie.$created))return Q.push(Object.fromEntries(Object.entries(ie))),Q;let fe=e(Ye).find(gt=>Je()?gt[e(D)]==ie[e(D)]:gt[e(D)]==ie);return!fe&&!Te()&&(fe=t.createHandler?e(Et)({inputValue:ie,valueField:e(D),labelField:e(ye),prefix:Mt()}):{[e(D)]:ie,[e(ye)]:ie}),fe&&(Z.has(fe[e(D)])||Q.push(fe),k.push(fe[e(D)])),Q},[]);if(e(M).forEach(Q=>!k.includes(Q[e(D)])&&Un(Q)),!(P.every(_n)&&(B()?Z.size===E.length:Z.size===1))){console.warn('[Svelecte]: provided "value" property is invalid',n),Je()&&Te()&&be()&&console.warn("[Svelecte]: with 'fetch' and 'valueAsObject' set make sure 'strictMode' is set to false to be to set initial value"),ar(),Be=B()?[]:null,_e(Be),vr(Be),mr()(n);return}}else ar();Be=Sn(n),B()&&!Array.isArray(n)&&(Be=[],_e(Be)),vr(At(!0))}function At(n){const o=n!==!0,b=e(M).map(E=>{if(o)return E[e(D)];const k={};for(let[P,$]of Object.entries(E))P[0]!=="$"&&(k[P]=$);return k});return B()?b:b.length?b.shift():null}bt(()=>{if(Ue()!==void 0&&yr!==Ue()||Ue()===void 0&&yr!==Ue()){const n=Ue()===void 0?!1:!Ue();ar(),_e(B()?[]:null),g(n)}yr=Ue(),we=Ue()!==void 0});function Pe(n){n&&!e(It)&&d(It,!0);const o=e(nr);!e(nr)&&n&&d(nr,!0),d(pe,n,!0),at().then(()=>{if(!o&&Qe())return at()}).then(()=>{Tt()===$r&&hi(n,e(re)),n&&(Se()&&(e(M).length===0||B())&&_t(0,{asc:!0}),!B()&&e(M).length&&d(K,e(Ye).findIndex(b=>b[e(D)]===e(M)[0][e(D)]),!0),Xr({container:Ce,scrollContainer:e(re),virtualList:Qe(),center:!1},e(K))),at().then(()=>d(Rt,n,!0))}),c||(c=()=>Tt()===$r&&hi(n,e(re))),document[n?"addEventListener":"removeEventListener"]("scroll",c,{passive:!0})}function Fi(n,o){if(!(be()&&!e(I))){if(n){d(Ft,e(_).max(je()),!0);return}d(Ft,o.length!==e(Ye).length&&e(M).length!==e(Ye).length?me()?e(_).emptyCreatable:e(_).nomatch:me()?e(_).emptyCreatable:e(_).empty,!0)}}function kr(){const n=At(!0),o=At(!1);Be=Je()?n:o,_e(Be),vr(n),at().then(()=>{Yt()(ln()?o:n),ee&&ee.dispatchEvent(new Event("change"))})}function Sr(n,o){if(o=o||n.detail,!(g()||o[Ae()]||o.$isGroupHeader)){if(!o||B()&&e(Me))return!1;if(Z.has(o[e(D)]))return!B()&&ue()!=="toggle"?void 0:Ur(o);if(typeof o=="string"){if(!me()||(o=Fn(o),ct.includes(o)||Z.has(o)))return;d(j,!0),Promise.resolve().then(()=>e(Et)({inputValue:o,valueField:e(D),labelField:e(ye),prefix:Mt()})).then(b=>{d(j,!1),!be()&&ct.push(o),b.$created=!0,cr()&&(e(ge).push(b),b=e(ge)[e(ge).length-1]),Xt()(b),_n(b),Hn(),kr()}).catch(b=>{d(j,!1),hr()({input:o,error:b})});return}_n(o),Hn(),kr()}}function Hn(){(B()&&le()||!B())&&d(u,""),(ce()===!0||ce()==="auto"&&!B())&&Pe(!1),je()&&e(M).length==je()&&d(K,0)}function _n(n){if(n.$selected=!0,B())e(M).push(n),Z.add(n[e(D)]);else{const o=e(M).shift();o&&(o.$selected=!1),d(M,[n],!0),Z.clear(),Z.add(n[e(D)]),at().then(()=>{const b=e(Ye).indexOf(n);d(K,b<0?0:b,!0)})}return t.optionResolver&&at().then(()=>{d(ge,t.optionResolver(w(),Z),!0)}),!0}function Ur(n=null,o){g()||(n?(Un(n,o),Qt()!==!0&&at().then(()=>Xr({scrollContainer:e(re),container:Ce,virtualList:Qe(),center:!1},e(K)))):ar(),kr())}function Un(n,o){if(n.$created){if(!cr()){ct.splice(ct.findIndex(k=>k===n[e(D)]),1);const E=e(ge).findIndex(k=>k[e(D)]===n[e(D)]);E!==-1&&e(ge).splice(E,1),d(ge,e(ge),!0)}o&&Jt()&&d(u,n[e(ye)].replace(Mt(),""),!0)}n.$selected=!1;const b=n[e(D)];if(Z.delete(b),e(M).splice(e(M).findIndex(E=>E[e(D)]==b),1),t.optionResolver){d(ge,t.optionResolver(w(),Z),!0);return}be()&&!e(I)&&Ze()&&d(Lt,!0)}function ar(){if(!(Z.size===0||!B()&&ue()==="none")){if(Z.clear(),d(M,e(M).reduce((n,o)=>(o.$selected=!1,[]),[]),!0),cr()||(ct=[]),e(u)&&d(u,""),t.optionResolver){d(ge,t.optionResolver(w(),Z),!0);return}be()&&!e(I)&&Ze()&&d(Lt,!0)}}function Oi(n){n.preventDefault(),!ct.includes(e(u))&&Sr(null,e(u))}function Ci(n){if(me()&&Y().indexOf(n.key)>-1){e(u).length>0&&Sr(null,e(u)),n.preventDefault();return}const o=Fe()&&e(pe)&&!n.shiftKey?"Tab":"No-tab";let b=J?n.metaKey:n.ctrlKey,E=["PageUp","PageDown"].includes(n.key),k=!1,P=!1;switch(n.key){case"End":if(e(u).length!==0)return;_t(e(H).length,{desc:!0});case"PageDown":if(E){const[ie,fe]=pn();d(K,Math.min(Math.ceil((fe*e(K)+ie)/fe),e(H).length+(me()&&e(u)?1:0)),!0)}case"ArrowUp":if(n.preventDefault(),!e(pe)){Pe(!0);return}_t(e(K)-1,{desc:!0}),at().then(()=>Xr({scrollContainer:e(re),container:Ce,virtualList:Qe(),center:!1},e(K)));break;case"Home":if(P=!0,e(u).length!==0||e(u).length===0&&e(H).length===0)return;_t(0,{asc:!0});case"PageUp":if(E){const[ie,fe]=pn();d(K,Math.floor((fe*e(K)-ie)/fe),!0)}case"ArrowDown":if(n.preventDefault(),!e(pe)){Pe(!0);return}const $=e(K)===null?-1:e(K);!P&&_t($+1,{asc:!0}),at().then(()=>Xr({scrollContainer:e(re),container:Ce,virtualList:Qe(),center:!1},e(K)));break;case"Escape":e(pe)&&(n.preventDefault(),n.stopPropagation()),e(u)||Pe(!1),d(u,"");break;case o:case"Enter":if(!e(pe)){n.key!==o&&Rr()(n);return}let Q=b?null:e(H)[e(K)];if(me()&&!Q&&e(u)){const ie=e(ht)(Fn(e(u)));Q=!Q||b?Fn(e(u)):Q,b=ie}if(!b&&Q&&Sr(null,Q),e(H).length<=e(K)&&_t(e(H).length-1),!Q&&e(M).length){Pe(!1),n.key!==o&&Rr()(n);return}(n.key!==o||n.key===o&&Fe()!=="select-navigate")&&n.preventDefault();break;case" ":!be()&&!e(pe)&&(Pe(!0),n.preventDefault());break;case"Backspace":if(Ve()==="always")return;k=!0;case"Delete":if(e(u)===""&&e(M).length){if(!B()&&ue()==="none")return;b?Ur():Ur(e(M)[e(M).length-1],k),n.preventDefault()}default:!b&&!["Tab","Shift"].includes(n.key)&&!e(pe)&&!e(U)&&Pe(!0)}}function Gn(n){if(g())return;const o=n.target.closest("[data-action]");if(e(It)||d(It,!0),o?.dataset.action==="default")return;n.preventDefault();const b=n.target.closest("[data-pos]");if(!o&&!b)return Ni(n.target);switch(o?.dataset.action||"select"){case"deselect":let k=o.bound_item;if(!k){const $=o.dataset.id;k=e(M).filter(Q=>Q[e(D)]==$).shift()}Ur(k),k&&!e(vt)&&de.focus();break;case"select":const P=parseInt(b.dataset.pos);Sr(null,e(H)[P]);break;case"toggle":Pe(!e(pe));break}}function Mi(n){if(Qa()&&!e(et)&&n.key==="Enter")return!0;A=["Enter","Escape"].includes(n.key)&&e(pe),Ci(n)}function Di(n){A&&(n.stopImmediatePropagation(),n.preventDefault()),A=!1}function Ti(){d(vt,!0),Pe(e(It)),e(wr)||d(wr,!0),Ve()==="blur"&&!ae&&setTimeout(()=>{d(T,!1)},100),cn()(de)}function ji(){d(vt,!1),Pe(!1),d(It,!1),L()?d(u,""):Pt&&!e(I)&&Pt.abort("blur"),Ve()==="blur"&&!ae&&setTimeout(()=>{d(T,!0)},100),Lr()(de)}function Li(n){if(me()){n.preventDefault();const o=new RegExp("([^"+Y()+"\\n]+)","g"),b=n.clipboardData.getData("text/plain").replace(/\//g,"/").replace(/\t/g," "),E=b.match(o);E.length===1&&b.indexOf(",")===-1&&d(u,E.pop().trim(),!0),E.forEach(k=>Sr(null,k.trim()))}}function qn(n){ae=n.type==="consider",d(M,n.detail.items,!0),ae||(kr(),Ve()==="blur"&&setTimeout(()=>{d(T,!0)},200))}let Pt,Gr;bt(()=>{Bi(e(u))}),bt(()=>{Ri(be(),Ue())});let Ft=O(He(be()?e(I)?e(_).fetchInit:Le()>1?e(_).fetchQuery(Le(),0):e(_).fetchBefore:me()?e(_).emptyCreatable:e(_).empty));function Ri(n,o){if(!n){Gr=null;return}(e(I)||z)&&(d(U,!0),gn({init:!0})),Gr=Ua(gn,sn())}function Bi(n){if(e(I)||e(Me)){d(Ft,e(Me)?e(_).max(je()):e(_).fetchInit,!0);return}Gr&&(Pt?.abort(),d(U,!0),e(u).length<Le()&&d(U,!1),!t.optionResolver&&Ze()&&(Re=[]),d(Rt,n.length>=Le()?me():!0,!0),d(Ft,e(Me)?e(_).max(je()):Le()<=1?e(_).fetchBefore:e(_).fetchQuery(Le(),n.length),!0),Gr())}function gn(n={}){if(Pt?.abort(),n.init!==!0&&!e(u).length||we&&!Ue()){d(U,!1),Ze()&&d(ge,t.optionResolver?t.optionResolver(w(),Z):[],!0);return}if(e(u)&&e(u).length<Le()){d(U,!1);return}e(I)&&Be&&(!B()||Be?.length>0)&&(z=Be);const o=Sn(z||n.initValue);let b;if(o&&(b=Je()?B()?o.map(k=>k[e(D)]):o[e(D)]:o),e(I))d(Ft,e(_).fetchInit,!0);else if(o&&t.optionResolver){z=null,d(Ft,Le()>1?e(_).fetchQuery(Le(),e(u).length):e(_).fetchBefore,!0);return}const E=G.requestFactory(e(u),{parentValue:Ue(),url:be(),initial:b},typeof ur()=="function"?ur()():ur());Pt?.abort(),Pt=E.controller,window.fetch(E.request).then(k=>k.json()).then(k=>(!Array.isArray(k)&&k?.error&&Zt()(k.error),Promise.resolve(Tr()?Tr()(k):k.data||k.items||k.options||k).then(P=>{Array.isArray(P)||(console.warn("[Svelecte]:Fetch - array expected, invalid property provided:",P),P=[]),d(Lt,!1),Re=null,d(ge,Cn(P,Ie),!0),Dt()(P),o&&(z=null,ut(o,{skipEqualityCheck:!0}),"storedValue"in n&&Ze(n.storedValue))}))).catch(k=>{if(k instanceof DOMException&&k.name==="AbortError")return!0;Re=null,d(ge,[],!0),Zt()(k),console.warn("[Svelecte] Fetch Error:",k)}).then(k=>{k!==!0&&(d(Ft,e(I)?e(_).empty:o?Le()>1?e(_).fetchQuery(Le(),0):e(_).fetchBefore:e(_).fetchEmpty,!0),Pt=null,d(U,!1),e(vt)&&Pe(!0),e(pe)&&!e(Rt)&&d(Rt,!0))})}function Pi(n){return Qt()?Qt()===!0?n?Z:null:n||B()?Z:null:Z}function _t(n,o={},b=0){const E=me()&&e(u)?e(H).length+1:e(H).length;if(!(b>=2)){if(n<0&&(n=o.desc?E-1:0),(e(K)===null&&Se()||n>=E)&&(n=0),e(H)[n]?.$isGroupHeader){_t(o.asc?n+1:n-1,o,++b);return}d(K,n,!0)}}function Ni(n){if(!g()){if(!e(vt)){de.focus();return}n.tagName==="INPUT"&&e(u)||Pe(!e(pe))}}function pn(){return Qe()?[On(e(re),"maxHeight")-On(e(re),"paddingTop")-On(e(re),"paddingBottom"),Ge?.resolveItemSize()]:[e(re).offsetHeight,Ce.firstElementChild.offsetHeight]}Pn(()=>{d(St,!0),J=navigator.platform.indexOf("Mac")===0||navigator.platform==="iPhone",d(h,J?"⌘":"Ctrl",!0),jt()&&(ee=document.getElementById(jt()),ee.className="sv-hidden-element",ee.innerHTML="",ee.tabIndex=-1,ee.disabled=g(),ee.required=m(),ee.multiple=B(),!B()&&ee.insertAdjacentHTML("beforeend",'<option value="" selected>Empty</option>'),Z.forEach(n=>{ee.insertAdjacentHTML("beforeend",`<option value=${n} selected>${n}</option>`)})),window.matchMedia("(prefers-reduced-motion: reduce)").matches&&d(Oe,0)});var zi={focus:Nr,setSelection:vn,getSelection:hn,refetchWith:mn},qr=Rs();let Wn;var bn=y(qr),Hi=y(bn);{var Ui=n=>{var o=ks(),b=Ee(o),E=y(b,!0);p(b);var k=C(b,2),P=y(k,!0);p(k),te(()=>{se(E,e(Bt)),se(P,e(mt))}),F(n,o)};ne(Hi,n=>{e(vt)&&n(Ui)})}p(bn);var Kn=C(bn,2);{var Gi=n=>{var o=Is();yt(o,21,()=>e(M),b=>b[e(D)],(b,E)=>{var k=Ss(),P=y(k,!0);p(k);var $={};te(()=>{se(P,e(E)[e(D)]),$!==($=e(E)[e(D)])&&(k.value=(k.__value=e(E)[e(D)])??"")}),F(b,k)}),p(o),wt(o,b=>ee=b,()=>ee),te(()=>{Ne(o,"name",f()),o.required=m(),o.multiple=B(),o.disabled=g(),Ne(o,"id",kt)}),F(n,o)};ne(Kn,n=>{f()&&!jt()&&n(Gi)})}var sr=C(Kn,2);sr.__mousedown=[_i],sr.__click=Gn;var Vn=y(sr);{var qi=n=>{var o=qe(),b=Ee(o);it(b,Br),F(n,o)};ne(Vn,n=>{Br()&&n(qi)})}var Nt=C(Vn,2);let Qn;var Jn=y(Nt);{var Wi=n=>{var o=qe(),b=Ee(o);it(b,un,()=>e(M),()=>e(_)),F(n,o)},Ki=n=>{var o=qe(),b=Ee(o);{var E=k=>{var P=qe(),$=Ee(P);it($,dn,()=>e(M),()=>ss),F(k,P)};ne(b,k=>{e(M).length&&k(E)},!0)}F(n,o)};ne(Jn,n=>{e(M).length&&B()&&e(T)?n(Wi):n(Ki,!1)})}var yn=C(Jn,2),xe=y(yn);xi(xe);let Yn;xe.__keydown=Mi,xe.__keyup=Di,xe.__input=[hs,M,B],wt(xe,n=>de=n,()=>de),p(yn),p(Nt),Cr(Nt,(n,o)=>he()?.(n,o),()=>({items:e(M),flipDurationMs:e(Oe),type:v(),dragDisabled:e(T)}));var Wr=C(Nt,2);let Xn;var Zn=y(Wr);{var Vi=n=>{var o=Es();let b;var E=y(o);it(E,Pr,()=>e(M),()=>e(u)),p(o),te(k=>b=ve(o,1,"sv-btn-indicator svelte-kgu1bj",null,b,k),[()=>({"sv-has-selection":e(M).length})]),F(n,o)};ne(Zn,n=>{Ke()&&!g()&&n(Vi)})}var $n=C(Zn,2);{var Qi=n=>{var o=As();F(n,o)};ne($n,n=>{Ke()&&n(Qi)})}var wn=C($n,2);let ei;var Ji=y(wn);it(Ji,fn,()=>e(pe)),p(wn),p(Wr);var Yi=C(Wr,2);{var Xi=n=>{var o=qe(),b=Ee(o);it(b,_r),F(n,o)};ne(Yi,n=>{_r()&&n(Xi)})}p(sr);var or=C(sr,2);let ti;or.__mousedown=[_i],or.__click=Gn;var Zi=y(or);{var $i=n=>{var o=Ls(),b=Ee(o);{var E=X=>{var oe=qe(),ke=Ee(oe);it(ke,$t),F(X,oe)};ne(b,X=>{$t()&&X(E)})}var k=C(b,2);let P;var $=y(k);let Q;var ie=y($);{var fe=X=>{{const oe=(tt,Ot=ze)=>{const dt=q(()=>e(H)[Ot()]||{});var Kr=qe(),Ht=Ee(Kr);{var Vr=Ct=>{var rt=Fs(),Ut=y(rt),ft=y(Ut,!0);p(Ut),p(rt),te(()=>se(ft,e(dt).label)),F(Ct,rt)},Qr=Ct=>{var rt=Os();let Ut;var ft=y(rt);it(ft,er,()=>e(dt),()=>e(u)),p(rt),te(nt=>{Ne(rt,"data-pos",Ot()),Ut=ve(rt,1,`sv-item--wrap in-dropdown ${xt()??""}`,"svelte-kgu1bj",Ut,nt)},[()=>({"sv-dd-item-active":e(K)===Ot(),"is-selected":e(dt).$selected||Z.has(e(dt)[e(D)]),"is-disabled":e(dt)[Ae()]})]),F(Ct,rt)};ne(Ht,Ct=>{e(dt).$isGroupHeader?Ct(Vr):Ct(Qr,!1)})}F(tt,Kr)};let ke=q(()=>pn().shift()),pt=q(()=>e(H).length||0);wt(cs(X,{get maxHeight(){return e(ke)},get itemHeight(){return jr()},get itemCount(){return e(pt)},get scrollToIndex(){return e(K)},children:oe,$$slots:{default:!0}}),tt=>Ge=tt,()=>Ge)}},gt=X=>{var oe=qe(),ke=Ee(oe);{var pt=tt=>{var Ot=qe(),dt=Ee(Ot);yt(dt,17,()=>e(H),Or,(Kr,Ht,Vr)=>{var Qr=qe(),Ct=Ee(Qr);{var rt=ft=>{var nt=Cs(),Ar=y(nt),kn=y(Ar,!0);p(Ar),p(nt),te(()=>se(kn,e(Ht).label)),F(ft,nt)},Ut=ft=>{var nt=Ms();Ne(nt,"data-pos",Vr);let Ar;var kn=y(nt);it(kn,er,()=>e(Ht),()=>e(u)),p(nt),te(ea=>Ar=ve(nt,1,`sv-item--wrap in-dropdown ${xt()??""}`,"svelte-kgu1bj",Ar,ea),[()=>({"sv-dd-item-active":e(K)===Vr,"is-selected":e(Ht).$selected,"is-disabled":e(Ht)[Ae()]})]),F(ft,nt)};ne(Ct,ft=>{e(Ht).$isGroupHeader?ft(rt):ft(Ut,!1)})}F(Kr,Qr)}),F(tt,Ot)};ne(ke,tt=>{Qe()===!1&&tt(pt)},!0)}F(X,oe)};ne(ie,X=>{Qe()&&e(re)?X(fe):X(gt,!1)})}var Ir=C(ie,2);{var Er=X=>{var oe=Ds(),ke=y(oe),pt=y(ke),tt=y(pt,!0);p(pt),p(ke),p(oe),te(()=>{ve(ke,1,`sv-item--wrap in-dropdown ${xt()??""}`,"svelte-kgu1bj"),se(tt,e(Ft))}),F(X,oe)};ne(Ir,X=>{(e(H).length===0&&(!me()||!e(u))||e(Me))&&X(Er)})}p($),wt($,X=>Ce=X,()=>Ce),p(k),wt(k,X=>d(re,X),()=>e(re));var xn=C(k,2);{var zt=X=>{var oe=js(),ke=y(oe);let pt;ke.__click=Oi,ke.__mousedown=[Ts];var tt=y(ke);it(tt,gr,()=>e(j),()=>e(u),()=>e(_)),p(ke),p(oe),te((Ot,dt)=>{pt=ve(ke,1,"creatable-row svelte-kgu1bj",null,pt,Ot),ke.disabled=dt},[()=>({active:(e(H).length?e(H).length:0)===e(K),"is-disabled":e(ht)(e(u))}),()=>e(ht)(e(u))]),F(X,oe)};ne(xn,X=>{me()&&e(u)&&!e(Me)&&X(zt)})}te((X,oe)=>{P=ve(k,1,"sv-dropdown-scroll svelte-kgu1bj",null,P,X),Q=ve($,1,"sv-dropdown-content",null,Q,oe)},[()=>({"has-items":e(H).length>0,"is-virtual":Qe()}),()=>({"max-reached":e(Me)})]),F(n,o)};ne(Zi,n=>{e(St)&&e(nr)&&n($i)})}return p(or),Cr(or,n=>Tt()?.(n)),p(qr),te((n,o,b,E,k,P)=>{Wn=ve(qr,1,ya(["svelecte",lt()]),"svelte-kgu1bj",Wn,n),ve(sr,1,`sv-control ${pr()??""}`,"svelte-kgu1bj"),Qn=ve(Nt,1,"sv-control--selection svelte-kgu1bj",null,Qn,o),Ne(yn,"data-value",e(u)||e($e)),Yn=ve(xe,1,"sv-input--text svelte-kgu1bj",null,Yn,b),Ne(xe,"id",v()),Ne(xe,"placeholder",e(u)?"":e($e)),Ne(xe,"inputmode",e(Xe)),xe.readOnly=!De(),Ne(xe,"enterkeyhint",e(et)),xe.disabled=g(),Ne(xe,"aria-label",e(_).aria_label),Ne(xe,"aria-describedby",e(_).aria_describedby),Xn=ve(Wr,1,"sv-buttons svelte-kgu1bj",null,Xn,E),ei=ve(wn,1,"sv-btn-indicator svelte-kgu1bj",null,ei,k),ti=ve(or,1,`sv_dropdown ${tr()??""} `,"svelte-kgu1bj",ti,P)},[()=>({"is-required":m(),"is-empty":e(M).length===0,"is-invalid":m()&&e(M).length===0,"is-tainted":e(wr),"is-valid":m()?e(M).length>0:!0,"is-focused":e(vt),"is-open":e(pe),"is-disabled":g()}),()=>({"is-single":B()===!1,"has-items":e(M).length>0,"has-input":e(u).length}),()=>({"keep-value":!L()}),()=>({"is-loading":e(U)}),()=>({"sv-dropdown-opened":e(pe)}),()=>({"is-open":e(Rt)})]),st("consider",Nt,qn),st("finalize",Nt,qn),st("focus",xe,Ti),st("blur",xe,ji),st("paste",xe,Li),wi(xe,()=>e(u),n=>d(u,n)),F(r,qr),zn(zi)}pi(["mousedown","click","keydown","keyup","input"]);function gi(r,t,i,a){if(!e(t).show)return;i();const{x:s,y:l}=a(r.clientX,r.clientY);d(t,{...e(t),x:s,y:l},!0)}function Ps(r,t){t("/")}function Ns(r,t,i,a){const s=ki(e(t)||e(i));a(s)}function zs(r,t,i,a,s){e(t)>0&&(d(t,e(t)-1),i(e(a)[e(t)]),s(e(a)[e(t)]))}function Hs(r,t,i,a,s){e(t)<e(i).length-1&&(d(t,e(t)+1),a(e(i)[e(t)]),s(e(i)[e(t)]))}function Us(r,t,i,a){r.key==="Enter"&&t(e(i)||e(a))}var Gs=(r,t)=>d(t,!e(t)),qs=(r,t)=>t("disk"),Ws=(r,t)=>t("count"),Ks=W(`<div class="flex flex-col divide-y divide-gray-500 absolute w-36 rounded border
           border-gray-500 bg-gray-800 shadow-lg z-20 overflow-hidden mt-0.5"><button class="w-full text-left px-3 py-2 hover:bg-gray-700 text-nowrap">By Disk Usage</button> <button class="w-full text-left px-3 py-2 hover:bg-gray-700">By Total Files</button></div>`),Vs=(r,t)=>d(t,!e(t)),Qs=(r,t)=>t(-1),Js=(r,t)=>t(0),Ys=(r,t)=>t(1),Xs=(r,t)=>t(2),Zs=W(`<div class="flex flex-col divide-y divide-gray-500 absolute w-48 rounded border
           border-gray-500 bg-gray-800 shadow-lg z-20 overflow-hidden mt-0.5"><button class="w-full text-left px-3 py-2 hover:bg-gray-700">Any Time</button> <button class="w-full text-left px-3 py-2 hover:bg-gray-700">Recent (2 months)</button> <button class="w-full text-left px-3 py-2 hover:bg-gray-700">Not too old (2 years)</button> <button class="w-full text-left px-3 py-2 hover:bg-gray-700">Old files</button></div>`),$s=(r,t)=>t(r),eo=W('<div class="h-full transition-all duration-300 min-w-[0.5px] hover:opacity-90"></div>'),to=W('<div class="relative p-3 bg-gray-800 border border-gray-500 rounded-lg animate-pulse min-h-16 h-16"><div class="flex items-center justify-between gap-4"><div class="h-4 bg-gray-700 rounded w-3/4"></div> <div class="h-3 bg-gray-700 rounded w-12"></div></div> <div class="flex gap-2 mt-2"><div class="h-3 bg-gray-700 rounded w-16"></div> <div class="h-3 bg-gray-700 rounded w-20"></div> <div class="h-3 bg-gray-700 rounded w-24"></div></div></div>'),ro=W('<div class="flex flex-col gap-2 overflow-y-auto"></div>'),no=(r,t,i)=>t(e(i).path),io=W('<div class="h-full transition-all duration-300 min-w-[0.5px] hover:opacity-90"></div>'),ao=W('<div class="relative px-2 py-1 cursor-pointer hover:opacity-95 bg-gray-700 border border-gray-500 rounded-lg overflow-hidden min-h-16"><div class="absolute left-0 top-0 bottom-0 flex z-0"></div> <div class="relative flex flex-col gap-2 z-10 pointer-events-none"><div class="flex items-center justify-between gap-4"><div class="w-full overflow-hidden text-ellipsis whitespace-nowrap"><div> </div></div> <span class="text-nowrap font-bold"> </span></div> <div class="flex justify-end"><p class="text-sm"> <!></p></div></div></div>'),so=(r,t)=>t(r),oo=W('<div class="flex"><span class="material-symbols-outlined text-4xl">subdirectory_arrow_right</span> <div class="relative flex grow px-2 py-1 bg-gray-700 border border-gray-500 rounded overflow-hidden text-xs"><div class="flex flex-col w-full"><div class="absolute left-0 top-0 bottom-0 z-0 opacity-60"></div> <div class="relative z-10 flex items-center justify-between gap-2"><div class="w-full overflow-hidden"><span class="cursor-pointer text-ellipsis text-nowrap"> </span></div> <div class="flex items-center gap-4 text-sm font-semibold text-nowrap"> </div></div> <div class="relative z-10 flex justify-between"><div> </div> <div> </div></div></div></div></div>'),lo=W('<div class="flex flex-col gap-2 overflow-y-auto transition-opacity duration-200 p-4"><!> <!></div>'),co=W('<div class="fixed z-50 pointer-events-none"><div class="relative rounded-xl border border-white/10 bg-black/90 text-white shadow-xl px-3 py-2"><div class="flex items-center justify-center"><div class="font-medium text-sm truncate max-w-[180px]"> </div></div> <div class="flex gap-2 items-center justify-between text-xs opacity-90"><div class="text-nowrap"> </div> <div> </div></div> <div class="absolute left-1/2 top-full -translate-x-1/2 mt-[-4px]"><div class="w-2 h-2 rotate-45 bg-black/90 border border-white/10 border-l-0 border-t-0"></div></div></div></div>'),uo=W("<div>Path copied!</div>"),fo=W('<div class="flex flex-col h-screen min-h-0 gap-2 p-2"><div class="flex gap-2 items-center relative select-none"><button class="btn" title="Go to Root Folder"><div class="flex items-center"><span class="material-symbols-outlined">home</span></div></button> <button class="btn" title="Go Back"><div class="flex items-center"><span class="material-symbols-outlined">arrow_back</span></div></button> <button class="btn" title="Go Forward"><div class="flex items-center"><span class="material-symbols-outlined">arrow_forward</span></div></button> <button class="btn" title="Go Up"><div class="flex items-center"><span class="material-symbols-outlined">arrow_upward</span></div></button> <div class="relative"><button class="btn w-36"><div class="flex items-center gap-2"><span class="material-symbols-outlined">sort</span> </div></button> <!></div> <div class="relative"><button class="btn w-36"><div class="flex items-center gap-2"><span class="material-symbols-outlined">schedule</span> </div></button> <!></div> <!></div> <div class="flex"><input placeholder="Path..." class="w-full truncate text-left cursor-pointer" autocorrect="off" spellcheck="false" autocomplete="off" autocapitalize="none"/></div> <div><div class="relative px-2 bg-gray-700 border border-gray-500 rounded overflow-hidden"><div class="absolute left-0 top-0 bottom-0 flex z-0" style="width: 100%"></div> <div class="relative z-10 p-1 pointer-events-none"><div class="flex items-center justify-end"><p> </p></div></div></div></div> <!> <div class="grow"></div></div> <!> <!>',1);function bo(r,t){Nn(t,!0);let i=[],a=O("/"),s=O("/"),l=O(He([])),f=O(He([])),v=O(!1),m=O(He(["/"])),g=O(0),w=O("disk"),S=O(!1),R=O("All Users"),N=O(He([])),V=He(new Map),Ae=O(He([])),We=O(void 0),De=O(!1);function Ke(c,h,u){const A="width:16px;height:16px;border:1px solid white;border-radius:3px;flex:none;",_=i[0],I=i[1]??_,z=i[2]??I,J=i[3]??z,T=c.user==="All Users"?`background: linear-gradient(90deg, ${_} 0%, ${I} 33%, ${z} 66%, ${J} 100%);`:`background: ${c.color};`,U=lr.isAdmin?"":"text-gray-400";return`<div class="flex gap-2 items-center">
                <div class="border border-gray-500 rounded"
                  style="${A}${T}"></div>
                <div class="${U}">${c.user}</div>              
              </div>`}fs("color",Ke);function ot(c){c.forEach((h,u)=>{V.has(h)||V.set(h,i[u%i.length])}),d(Ae,Array.from(V.entries()).map(([h,u])=>({user:h,color:u})),!0)}function Se(c){const h=V.get(c);if(h)return h;let u=0;for(let _=0;_<c.length;_++)u=u*31+c.charCodeAt(_)>>>0;const A=i[u%i.length];return V.set(c,A),A}let Fe=O(-1),L=O(!1);const le={"-1":"Any Time",0:"Recent",1:"Not too old",2:"Old files"};function ce(c){return le[c]}function ue(c){d(Fe,c,!0),d(L,!1),hr()}let he=O(He({show:!1,x:0,y:0})),Te=O(null);const B=8,je=10;function Ve(c,h){const u=window.innerWidth,A=window.innerHeight,_=e(Te)?.offsetWidth??200,I=e(Te)?.offsetHeight??60,z=_/2,J=B+z,T=u-B-z,U=B+I+je,j=A-B;return{x:Math.min(T,Math.max(J,c)),y:Math.min(j,Math.max(U,h))}}function Qt(c,h,u){Jt();const{x:A,y:_}=Ve(c.clientX,c.clientY);d(he,{show:!0,x:A,y:_,username:h.username,value:dr(h),percent:Math.round(u*10)/10},!0)}function me(){Jt(),d(he,{show:!1,x:0,y:0},!0)}let Mt=O(null);function Jt(){e(Mt)&&(clearTimeout(e(Mt)),d(Mt,null))}function cr(c,h){const u=h===-1?["0","1","2"]:[String(h)];return(c??[]).map(A=>{const _={};let I=0,z=0,J=0,T=0;const U=Object.entries(A.users??{});for(const[j,Oe]of U){let ae=0,we=0,de=0,ee=0;for(const Ce of u){const re=Oe?.[Ce];if(!re)continue;const Ge=Number(re.count??0),Me=Number(re.disk??0),Re=Number(re.mtime??0),H=Number(re.mtime??0);ae+=Number.isFinite(Ge)?Ge:0,we+=Number.isFinite(Me)?Me:0,Number.isFinite(Re)&&Re>de&&(de=Re),Number.isFinite(H)&&H>ee&&(ee=H)}(ae||we)&&(_[j]={username:j,count:ae,disk:we,atime:de,mtime:ee},I+=ae,z+=we,de>J&&(J=de),ee>T&&(T=ee))}return{path:A.path,total_count:I,total_disk:z,accessed:J,modified:T,users:_}}).filter(A=>Object.keys(A.users).length>0)}const Y=c=>{const h=Number(c);return Number.isFinite(h)?h:0},be=q(()=>{const c=e(w);return(e(l)?[...e(l)]:[]).sort((u,A)=>{let _,I;switch(c){case"disk":_=Y(u?.total_disk),I=Y(A?.total_disk);break;case"count":_=Y(u?.total_count),I=Y(A?.total_count);break}return I-_})});let ur=q(()=>{const c=e(w),h=e(l)?.map(A=>{switch(c){case"disk":return Y(A?.total_disk);case"count":return Y(A?.total_count)}})??[],u=Math.max(0,...h);return u>0?u:1});const an=c=>{const u=Y(c)/e(ur)*100,A=Math.max(0,Math.min(100,u));return Math.round(A*10)/10},Tr=c=>{switch(c){case"disk":return"Disk Usage";case"count":return"Total Files";default:return"Disk Usage"}};function Ze(c,h){let u=typeof h=="function"?h:h?.close;const A=I=>{c.contains(I.target)||u?.()},_=I=>{(I.key==="Escape"||I.key==="Esc")&&u?.()};return document.addEventListener("pointerdown",A,!0),document.addEventListener("keydown",_,!0),{update(I){u=typeof I=="function"?I:I?.close},destroy(){document.removeEventListener("pointerdown",A,!0),document.removeEventListener("keydown",_,!0)}}}const sn=c=>{switch(e(w)){case"disk":return Y(c?.total_disk);case"count":return Y(c?.total_count)}};function Le(c){switch(e(w)){case"disk":return Yr(Y(c?.total_disk));case"count":return Y(c?.total_count).toLocaleString()}}function dr(c){switch(e(w)){case"disk":return Yr(Y(c?.disk));case"count":return Y(c?.count).toLocaleString()}}const Qe=c=>e(w)==="disk"?Number(c.disk):Number(c.count);function jr(c){return Object.entries(c?.users??{}).sort(([,h],[,u])=>Qe(h)-Qe(u))}function on(c,h,u){let A=0,_=0,I=0,z=0;const J={};for(const T of c??[]){A+=Y(T?.total_count),_+=Y(T?.total_disk),T.accessed>I&&(I=T.accessed),T.modified>z&&(z=T.modified);const U=T?.users??{};for(const[j,Oe]of Object.entries(U)){const ae=Oe,we=J[j]??{count:0,disk:0,atime:0,mtime:0};J[j]={username:j,count:we.count+Y(ae.count),disk:we.disk+Y(ae.disk),atime:Math.max(we.atime,Y(ae.atime)),mtime:Math.max(we.mtime,Y(ae.mtime))}}}for(const T of h??[]){A+=1,_+=Y(T?.size),T.accessed>I&&(I=T.accessed),T.modified>z&&(z=T.modified);const U=T.owner;if(U){const j=J[U]??{count:0,disk:0,atime:0,mtime:0};J[U]={username:U,count:j.count+1,disk:j.disk+Y(T.size),atime:Math.max(j.atime,Y(T.accessed)),mtime:Math.max(j.mtime,Y(T.modified))}}}return{path:u,total_count:A,total_disk:_,accessed:I,modified:z,users:J}}const lt=q(()=>on(e(l),e(f),e(a)));function fr(c){switch(e(w)){case"disk":return Y(c.size);case"count":return 1}}const _e=q(()=>(e(f)?[...e(f)]:[]).sort((h,u)=>fr(u)-fr(h))),vr=q(()=>{const c=e(w)==="disk"?e(lt).total_disk:e(lt).total_count;return c>0?c:1}),ln=c=>Math.round(fr(c)/e(vr)*1e3)/10;function Je(c){switch(e(w)){case"disk":return Yr(Y(c.size));case"count":return"1"}}function Ue(c){let h=!1,u=null;return async(...A)=>{if(u=A,!h){h=!0;try{for(;u;){const _=u;u=null,await c(..._)}}finally{h=!1}}}}const Yt=Ue(async c=>{d(v,!0);try{const h=e(R)==="All Users"?[]:[e(R)],u=await An.getFolders(c,h,e(Fe));d(l,cr(u,e(Fe)),!0),d(f,await An.getFiles(c,h,e(Fe)),!0),e(N)&&e(N).length>0&&ot(e(N))}finally{d(v,!1)}});function cn(c){e(m)[e(g)]!==c&&(d(m,e(m).slice(0,e(g)+1),!0),e(m).push(c),d(g,e(m).length-1))}function Lr(c){d(w,c,!0),d(S,!1)}function Xt(c){Zt(c),cn(e(s)||e(a)),Yt(e(s)||e(a))}function hr(){Yt(e(s)||e(a))}function Rr(){(!e(R)||e(R)===null)&&d(R,"All Users"),hr()}let Dt=O(!1);function Zt(c){const h=dn(c);d(s,h,!0),e(De)?d(a,h,!0):d(a,mr(h),!0)}function mr(c,h=50){if(!c||c.length<=h)return c;const u=c.split("/");let A=u[u.length-1];for(let _=u.length-2;_>=0;_--){const I=u[_]+"/"+A;if(("..."+I).length>h)break;A=I}return"..."+A}function Br(){d(De,!0),e(s)&&d(a,e(s),!0)}function un(){d(De,!1),e(a)&&!e(a).startsWith("...")&&d(s,e(a),!0),e(s)&&d(a,mr(e(s)),!0)}function dn(c){if(!c)return"/";let h=c.replace(/\\/g,"/");return h!=="/"&&(h=h.replace(/\/+$/,"")),h.startsWith("/")||(h="/"+h),h||"/"}async function Pr(c){let h=c.currentTarget;try{const u=h.value!==void 0?h.value:h.textContent||h.innerText||"";await navigator.clipboard.writeText(u),fn()}catch(u){console.error("Copy failed:",u)}}function fn(){d(Dt,!0),setTimeout(()=>{d(Dt,!1)},2e3)}Pn(async()=>{console.log("api url:",yi),d(N,await An.getUsers(),!0),i=xa(e(N).length),e(N).splice(0,0,"All Users"),lr.isAdmin?d(R,"All Users"):d(R,lr.username,!0),ot(e(N)),d(s,e(a),!0),d(a,mr(e(a)),!0),hr()});var _r=fo(),$t=Ee(_r),er=y($t),gr=y(er);gr.__click=[Ps,Xt];var Tt=C(gr,2);Tt.__click=[zs,g,Zt,m,Yt];var jt=C(Tt,2);jt.__click=[Hs,g,m,Zt,Yt];var pr=C(jt,2);pr.__click=[Ns,s,a,Xt];var tr=C(pr,2),xt=y(tr);xt.__click=[Gs,S];var Nr=y(xt),vn=C(y(Nr));p(Nr),p(xt);var hn=C(xt,2);{var mn=c=>{var h=Ks(),u=y(h);u.__click=[qs,Lr];var A=C(u,2);A.__click=[Ws,Lr],p(h),F(c,h)};ne(hn,c=>{e(S)&&c(mn)})}p(tr),Cr(tr,(c,h)=>Ze?.(c,h),()=>()=>d(S,!1));var kt=C(tr,2),St=y(kt);St.__click=[Vs,L];var br=y(St),Be=C(y(br));p(br),p(St);var yr=C(St,2);{var rr=c=>{var h=Zs(),u=y(h);u.__click=[Qs,ue];var A=C(u,2);A.__click=[Js,ue];var _=C(A,2);_.__click=[Ys,ue];var I=C(_,2);I.__click=[Xs,ue],p(h),F(c,h)};ne(yr,c=>{e(L)&&c(rr)})}p(kt),Cr(kt,(c,h)=>Ze?.(c,h),()=>()=>d(L,!1));var D=C(kt,2);{let c=q(()=>!lr.isAdmin);Bs(D,{get disabled(){return e(c)},get options(){return e(Ae)},valueField:"user",renderer:"color",highlightFirstItem:!1,onChange:Rr,closeAfterSelect:!0,deselectMode:"native",virtualList:!0,class:`z-20 min-w-40 h-10 border rounded
       border-gray-500 bg-gray-800 text-white`,get value(){return e(R)},set value(h){d(R,h,!0)}})}p(er);var ye=C(er,2),Ie=y(ye);xi(Ie),Ie.__keydown=[Us,Xt,s,a],Ie.__click=[$s,Pr],wt(Ie,c=>d(We,c),()=>e(We)),p(ye);var ge=C(ye,2),Lt=y(ge),Ye=y(Lt);yt(Ye,21,()=>jr(e(lt)),([c,h])=>c,(c,h)=>{var u=q(()=>ai(e(h),2));let A=()=>e(u)[0],_=()=>e(u)[1];const I=q(()=>e(w)==="disk"?_().disk:_().count),z=q(()=>e(w)==="disk"?e(lt).total_disk:e(lt).total_count),J=q(()=>e(z)>0?e(I)/e(z)*100:0);var T=eo();T.__mousemove=[gi,he,Jt,Ve],te((U,j)=>{qt(T,`width: ${e(J)??""}%; background-color: ${U??""};`),Ne(T,"aria-label",j)},[()=>Se(A()),()=>`${_().username}: ${dr(_())}`]),st("mouseenter",T,U=>Qt(U,_(),e(J))),st("mouseleave",T,me),F(c,T)}),p(Ye);var M=C(Ye,2),Z=y(M),ct=y(Z),vt=y(ct);p(ct),p(Z),p(M),p(Lt),p(ge);var It=C(ge,2);{var wr=c=>{var h=qe(),u=Ee(h);{var A=I=>{var z=ro();yt(z,20,()=>Array(6),Or,(J,T)=>{var U=to();F(J,U)}),p(z),F(I,z)},_=I=>{var z=lo(),J=y(z);yt(J,17,()=>e(be),Or,(U,j)=>{var Oe=ao();Oe.__click=[no,Xt,j];var ae=y(Oe);yt(ae,21,()=>jr(e(j)),Or,(Xe,$e)=>{var et=q(()=>ai(e($e),2));let Bt=()=>e(et)[0],mt=()=>e(et)[1];const xr=q(()=>e(w)==="disk"?mt().disk:mt().count),zr=q(()=>e(w)==="disk"?e(j).total_disk:e(j).total_count),Hr=q(()=>e(zr)>0?e(xr)/e(zr)*100:0);var ut=io();ut.__mousemove=[gi,he,Jt,Ve],te((At,Pe)=>{qt(ut,`width: ${e(Hr)??""}%; background-color: ${At??""};`),Ne(ut,"aria-label",Pe)},[()=>Se(Bt()),()=>`${mt().username}: ${dr(mt())}`]),st("mouseenter",ut,At=>Qt(At,mt(),e(Hr))),st("mouseleave",ut,me),F(Xe,ut)}),p(ae);var we=C(ae,2),de=y(we),ee=y(de),Ce=y(ee),re=y(Ce,!0);p(Ce),p(ee);var Ge=C(ee,2),Me=y(Ge,!0);p(Ge),p(de);var Re=C(de,2),H=y(Re),ht=y(H),Et=C(ht);{var ir=Xe=>{var $e=pa();te(et=>se($e,`• Last file read ${et??""}`),[()=>Gt(e(j).accessed)]),F(Xe,$e)};ne(Et,Xe=>{Gt(e(j).accessed)>Gt(e(j).modified)&&Xe(ir)})}p(H),p(Re),p(we),p(Oe),te((Xe,$e,et,Bt)=>{qt(ae,`width: ${Xe??""}%`),se(re,e(j).path),se(Me,$e),se(ht,`${et??""} Files 
                • Updated ${Bt??""} `)},[()=>an(sn(e(j))),()=>Le(e(j)),()=>si(e(j).total_count),()=>Gt(e(j).modified)]),F(U,Oe)});var T=C(J,2);yt(T,17,()=>e(_e),Or,(U,j)=>{const Oe=q(()=>Se(e(j).owner));var ae=oo(),we=C(y(ae),2),de=y(we),ee=y(de),Ce=C(ee,2),re=y(Ce),Ge=y(re);Ge.__click=[so,Pr];var Me=y(Ge,!0);p(Ge),p(re);var Re=C(re,2),H=y(Re,!0);p(Re),p(Ce);var ht=C(Ce,2),Et=y(ht),ir=y(Et,!0);p(Et);var Xe=C(Et,2),$e=y(Xe);p(Xe),p(ht),p(de),p(we),p(ae),te((et,Bt,mt,xr)=>{qt(ee,`width: ${et??""}%; background-color: ${e(Oe)??""};`),se(Me,e(j).path),se(H,Bt),se(ir,e(j).owner),se($e,`Updated ${mt??""} • Read ${xr??""}`)},[()=>ln(e(j)),()=>Je(e(j)),()=>Gt(e(j).modified),()=>Gt(e(j).accessed)]),F(U,ae)}),p(z),F(I,z)};ne(u,I=>{e(v)?I(A):I(_,!1)},!0)}F(c,h)};ne(It,c=>{c(wr,!1)})}Mn(2),p($t);var pe=C($t,2);{var Rt=c=>{var h=co(),u=y(h),A=y(u),_=y(A),I=y(_,!0);p(_),p(A);var z=C(A,2),J=y(z),T=y(J,!0);p(J);var U=C(J,2),j=y(U);p(U),p(z),Mn(2),p(u),wt(u,Oe=>d(Te,Oe),()=>e(Te)),p(h),te(()=>{qt(h,`
      left: ${e(he).x??""}px;
      top: ${e(he).y??""}px;
      transform: translate(-50%, calc(-100% - 10px));
    `),se(I,e(he).username),se(T,e(he).value),se(j,`${e(he).percent??""}%`)}),F(c,h)};ne(pe,c=>{e(he).show&&c(Rt)})}var K=C(pe,2);{var nr=c=>{var h=uo();let u;te(A=>u=ve(h,1,`fixed top-1 inset-x-0 mx-auto w-max bg-emerald-600 text-white px-4 py-1 
      rounded-lg font-medium shadow-lg z-50 transform transition-transform duration-300 
      ease-[cubic-bezier(0.68,-0.55,0.265,1.55)]`,null,u,A),[()=>({"translate-x-full":!e(Dt),"translate-x-0":e(Dt)})]),F(c,h)};ne(K,c=>{e(Dt)&&c(nr)})}te((c,h,u,A,_,I)=>{gr.disabled=e(g)===0||e(s)==="/",Tt.disabled=e(g)===0,jt.disabled=e(g)>=e(m).length-1,pr.disabled=c,se(vn,` ${h??""}`),se(Be,` ${u??""}`),Ie.disabled=e(v),se(vt,`${A??""} Files 
            • Changed ${_??""} 
            • ${I??""}`)},[()=>ki(e(a))===e(a),()=>Tr(e(w)),()=>ce(e(Fe)),()=>si(e(lt).total_count),()=>Gt(e(lt).modified),()=>Yr(e(lt).total_disk)]),st("blur",Ie,un),st("focus",Ie,Br),wi(Ie,()=>e(a),c=>d(a,c)),F(r,_r),zn()}pi(["click","keydown","mousemove"]);export{bo as component};
//# sourceMappingURL=2.wL31EZl7.js.map
